let o=!1,x=0;const $=(n,{currentSetReps:D,targetRepsPerSet:l,totalReps:b,totalTargetReps:w})=>{if(!n.poseLandmarks)return{feedback:"No person detected."};const d=n.poseLandmarks[11],f=n.poseLandmarks[12],h=n.poseLandmarks[13],m=n.poseLandmarks[14],y=n.poseLandmarks[15],u=n.poseLandmarks[16];if(!d||!f||!h||!m||!y||!u)return{feedback:"Please position yourself correctly in the frame."};const k=(s,r,c)=>{const g=Math.hypot(r.x-s.x,r.y-s.y),L=Math.hypot(c.x-r.x,c.y-r.y),R=Math.hypot(c.x-s.x,c.y-s.y),S=(g**2+L**2-R**2)/(2*g*L),T=Math.max(-1,Math.min(1,S));return Math.acos(T)*(180/Math.PI)},A=k(d,h,y),M=k(f,m,u),a=(A+M)/2,E=120,H=145,p=160;let e="Starting push-ups...",t=D,i=0;return!o&&a<E?(o=!0,e="Down position detected - push back up!"):!o&&a<H&&a>=E?(o=!0,e="Partial down detected - try to go lower!"):o&&a>p&&(o=!1,t===x&&(a>=p?(t++,x=t,e=`Rep ${t} completed! ${t>=l?"Set complete!":""}`):(i++,e=`Partial rep ${i} - try to extend fully!`))),!o&&a>p&&t>0&&(e=`Ready for rep ${t+1}. Current: ${t}/${l}`),t>=l&&(e="Set complete! Take a rest."),b>=w&&(e="Workout complete! Great job!"),{repCount:t,feedback:e,partialReps:i,avgElbowAngle:Math.round(a),isDown:o}};export{$ as monitorPushUps};
